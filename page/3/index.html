<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.8.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|EB Garamond:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Console:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zentia.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"LAEJN7HTXI","apiKey":"db483f3dceb8b9b4ac8ca1fcf782c13e","indexName":"hexo","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="liyanfeng">
<meta property="og:url" content="http://zentia.github.io/page/3/index.html">
<meta property="og:site_name" content="liyanfeng">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="liyanfeng">

<link rel="canonical" href="http://zentia.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>liyanfeng</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">liyanfeng</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/09/03/Video-Memory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/Video-Memory/" class="post-title-link" itemprop="url">显存</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-03 20:14:48" itemprop="dateCreated datePublished" datetime="2019-09-03T20:14:48+08:00">2019-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:38" itemprop="dateModified" datetime="2021-06-17T10:39:38+08:00">2021-06-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/09/03/Video-Memory/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/09/03/Video-Memory/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>显存全称显示存储器，</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/09/03/MatCap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/MatCap/" class="post-title-link" itemprop="url">MatCap</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-03 13:03:57" itemprop="dateCreated datePublished" datetime="2019-09-03T13:03:57+08:00">2019-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:37" itemprop="dateModified" datetime="2021-06-17T10:39:37+08:00">2021-06-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unity-Community-Wiki/" itemprop="url" rel="index"><span itemprop="name">Unity Community Wiki</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/09/03/MatCap/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/09/03/MatCap/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <img src="/2019/09/03/MatCap/MatCap.png">
<h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>MatCap (Material Capture) shader,for displaying objects with reflective materials with uniform surface coloring,like Zbrush or Mudbox can.It uses an image of a sphere as a view-space environment map.It’s very cheap,and looks great when the camera doesn’t rotate.<br>用于均一表面反射材质的着色器，在Zbrush/Mudbox等软件中被广泛运用。它借助一幅含有球面的图片作为视线空间的环境映射，计算成本非常低廉，当相机不转动时视觉效果极其出色。<br><img src="/2019/09/03/MatCap/2.jpg"></p>
<h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><p>Use a regular normal map for your object, and a render or a photo of a sphere for the MatCap.<br>Matcap的原理并不复杂，就是使用一张中间为球面的图片作为不同法线方向的光照颜色，然后将这些颜色根据模型的法线信息渲染到相应的位置。</p>
<p>例如下图图二（黑白）中，球形就是Matcap贴图，箭头代表了右下朝向的法线，车与人模型发现朝向此相同方向时，就会渲染为球形贴图上相应点的颜色——白色。<br><img src="/2019/09/03/MatCap/3.jpg"></p>
<h1 id="ShaderLab-MatCap-shader"><a href="#ShaderLab-MatCap-shader" class="headerlink" title="ShaderLab-MatCap.shader"></a>ShaderLab-MatCap.shader</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">"MatCap Bumped"</span>&#123;</span><br><span class="line">    Properties &#123;</span><br><span class="line">        _Color (<span class="string">"Main Color"</span>, Color)=(<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">1</span>)</span><br><span class="line">        _BumpMap(<span class="string">"BumpMap (RGB)"</span>,<span class="number">2</span>D)=<span class="string">"bump"</span>&#123;&#125;</span><br><span class="line">        _MatCap(<span class="string">"MatCap (RGB)"</span>,<span class="number">2</span>D)=<span class="string">"white"</span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    SUbShader&#123;</span><br><span class="line">        Tags &#123;<span class="string">"RenderType"</span>=<span class="string">"Queue"</span>&#125;</span><br><span class="line">        Fog &#123;Color [_AddFog]&#125;</span><br><span class="line">        Pass &#123;</span><br><span class="line">            Name <span class="string">"BASE"</span></span><br><span class="line">            Tags &#123;<span class="string">"LightMode"</span>=<span class="string">"Always"</span>&#125;</span><br><span class="line">            </span><br><span class="line">            CGPROGRAM</span><br><span class="line">            #pragma exclude_renderers xbox360</span><br><span class="line">            #pragma vertex vert</span><br><span class="line">            #pragma fragment frag</span><br><span class="line">            #pragma fragmentoption ARB_fog_exp2</span><br><span class="line">            #pragma fragmentoption ARB_precision_hint_fastes</span><br><span class="line">            #include <span class="string">"UnityCG.cginc"</span></span><br><span class="line">            </span><br><span class="line">            struct v2f&#123;</span><br><span class="line">                float4 pos : SV_POSITION;</span><br><span class="line">                float2 vu : TEXCOORD0;</span><br><span class="line">                float3 TtoV0 : TEXCOODR1;</span><br><span class="line">                float3 TtoV1 : TEXCOORD2;</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line">            uniform float4 _BumpMap_ST;</span><br><span class="line">            <span class="function">v2f <span class="title">vert</span><span class="params">(appdata_tan v)</span></span>&#123;</span><br><span class="line">                v2f o;</span><br><span class="line">                o.pos = mul(UNITY_MATRIX_MVP,v.vertex);</span><br><span class="line">                o.uv = TRANSFORM_TEX(v.texcoord,_BumpMap);</span><br><span class="line">                TANGENT_SPACE_ROTATION</span><br><span class="line">                o.TtoV0 = mul(rotation,UNITY_MATRIX_IT_MV[<span class="number">0</span>].xyz);</span><br><span class="line">                o.TtoV1 = mul(rotation,UNITY_MATRIX_IT_MV[<span class="number">1</span>].xyz);</span><br><span class="line">                <span class="keyword">return</span> o;</span><br><span class="line">            &#125;</span><br><span class="line">            uniform float4 _Color;</span><br><span class="line">            uniform sampler2D _BumpMap;</span><br><span class="line">            uniform sampler2D _MatCap;</span><br><span class="line">            float4 frag (v2f i) : Color</span><br><span class="line">            &#123;</span><br><span class="line">                float3 normal = UnpackNormal(tex2D(_BumpMap,i.uv);</span><br><span class="line">                half2 vn;</span><br><span class="line">                vn.x = dot(i.TtoV0,normal);</span><br><span class="line">                vn.y = dot(i.TtoV1,normal);</span><br><span class="line">                float4 matcapLookup = tex2D(_MatCap,vn*<span class="number">0.5</span>+<span class="number">0.5</span>);</span><br><span class="line">                matcapLookup.a = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span> _Color*mapcapLookup*<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ENDCG</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/09/03/Matcap-Shader/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/Matcap-Shader/" class="post-title-link" itemprop="url">Matcap Shader</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-03 13:00:26" itemprop="dateCreated datePublished" datetime="2019-09-03T13:00:26+08:00">2019-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:37" itemprop="dateModified" datetime="2021-06-17T10:39:37+08:00">2021-06-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/09/03/Matcap-Shader/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/09/03/Matcap-Shader/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Matcap Shader是一种在某些层面能替代甚至超越PBR的次时代渲染方案。<br>它的效率极高、计算成本极低，显示效果极佳，却能完美运行于不通的移动平台，并兼容AR、VR设备。<br>但Matcap也有很多局限性和缺点，此系列文章就是用于讲解Matcap的实现方法针对其问题的优化。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/09/03/Finite-State-Machine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/Finite-State-Machine/" class="post-title-link" itemprop="url">Finite State Machine</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-03 12:27:23" itemprop="dateCreated datePublished" datetime="2019-09-03T12:27:23+08:00">2019-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:37" itemprop="dateModified" datetime="2021-06-17T10:39:37+08:00">2021-06-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/09/03/Finite-State-Machine/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/09/03/Finite-State-Machine/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>This is Deterministic Finite State Machine framework based on chapter 3.1 of Game Programming Gems 1 by Eric Dybsend. There are two classes and two enums.Include them in your project and follow the explanations to get the FSM working properly.There’s also a complete example script at the end of this page.</p>
<h1 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h1><ul>
<li><strong>Transition enum</strong>:This enum contains the labels to the transition that can be fired by the system.Don’t change the first label,NullTransition,as the FSMSystem class uses it.</li>
<li><strong>StateID enum</strong>:This is the ID of the states the game may have.You could use references to the real State’s classes but using enums makes the system less susceptible to have code having access to objects it is not supposed to.All the state’s ids should be placed here.Don’t change the first label,NullStateID,as the FSMSystem class uses it.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/09/02/Tencent-Game-Development-Gem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/02/Tencent-Game-Development-Gem/" class="post-title-link" itemprop="url">腾讯游戏开发精粹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-02 12:02:25" itemprop="dateCreated datePublished" datetime="2019-09-02T12:02:25+08:00">2019-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:38" itemprop="dateModified" datetime="2021-06-17T10:39:38+08:00">2021-06-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/09/02/Tencent-Game-Development-Gem/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/09/02/Tencent-Game-Development-Gem/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="基于SDF的摇杆移动"><a href="#基于SDF的摇杆移动" class="headerlink" title="基于SDF的摇杆移动"></a>基于SDF的摇杆移动</h1><p>在当前MOBA手游中，移动方式大多采用摇杆移动，摇杆移动首先要解决的问题是与障碍物的碰撞检测，以及发生碰撞后如何行走（碰撞后直接停止的体验非常糟糕）。根据地图数据的不通，摇杆移动的碰撞检测方式有多重。</p>
<ol>
<li>物理碰撞方式：直接使用点（或圆）与多边形进行碰撞检测，然后绕多边形的边移动。</li>
<li>NavMesh方式：同样需要做点（或圆）与多边形碰撞检测，然后绕多边形的边移动。</li>
<li>栅格方式：检测点是否在阻挡栅格内，或者圆与阻挡栅格的距离，碰撞后移动方向不好确定。</li>
</ol>
<p>这里提供一种更为高效的且更为方便地解决其他移动相关需求的方案，即：基于SDF的摇杆移动。<br>SDF（Signed Distance Field）即有号距离场，表示空间中点到形状表面的最短距离，一般用正值表示形状外部，用负值表示形状内部。<br><img src="/2019/09/02/Tencent-Game-Development-Gem/1.jpg"><br>用数学公式表示，首先定义$\phi:R^n&gt;R$对于一个形状点集S，有<br><img src="/2019/09/02/Tencent-Game-Development-Gem/2.jpg"><br>检测某点x是否在形状（障碍物）之内表示为：$/phi(x)\le 0$，如果预先知道每个店的有号距离$\phi(x)$，那么碰撞检测只需要一次查表即可。<br>因为SDF数据的生成较为耗时，因此需要预计算生成。顶视角MOBA游戏只需要做二维SDF计算，为减少数据存储量，先栅格化地图，通过点到多边形（障碍物）的距离离线计算栅格顶点的有号距离，从而生成SDF数据。运行时使用双线性过滤采样可以获得地图任意点的有号距离值，与角色碰撞半径比较判断是否和障碍物发生碰撞，检测过程只需查表和进行插值乘法计算，时间复杂度为O(1)。</p>
<p>SDF的梯度方向代表最大的变化方向，因此可以将梯度算子作为边界法线，当角色与障碍物发生碰撞后可沿着法线垂直方向滑行，同样可以根据梯度方向快速迭代来处理在MOBA游戏中击飞后”卡”在障碍物中的问题。对于瞬间位移（比如闪现）且不能穿越障碍物的需求，可以采用圆盘投射，以有号距离作为迭代补偿。对于AI寻路，SDF也可以通过修改探索函数（判断有号距离与碰撞半径的大小）来实现，且可以修改碰撞半径搜索贴近或远离障碍物的路径，打破寻路对称性。</p>
<p>前面讲到呃SDF是离线预生成的，那么对于MOBA游戏中动态障碍物的处理，可以使用程序式SDF和CSG运算来实现。不过，SDF在提高效率的同时也存在着存储空间大、较难动态更新（地形发生大的变化）的问题。</p>
<h2 id="利用栅格数据预计算SDF"><a href="#利用栅格数据预计算SDF" class="headerlink" title="利用栅格数据预计算SDF"></a>利用栅格数据预计算SDF</h2><p>SDF 记录的是点到障碍物的距离，核心思想即空间换时间；如果动态计算点x的有号距离$\phi(x)$，那么复杂度跟物理碰撞检测的方案没什么区别。因此，我们需要预计算得到整张地图的SDF数据，因为不可能存储地图上所有的点，需要根据障碍精度对地图进行栅格化，比如主流MOBA游戏的5v5地图可以使用256x256栅格。<br>首先介绍一种基于栅格的SDF预计算方法。<br>根据场景障碍生成如图1.2所示的栅格地图，灰色表示阻挡，白色表示可行走区域。使用Meijster算法计算栅格中任意各自$(x,y)$到栅格阻挡区中最近各自的距离：<br><img src="/2019/09/02/Tencent-Game-Development-Gem/3.jpg"><br>图1.2 栅格地图<br><img src="/2019/09/02/Tencent-Game-Development-Gem/4.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/09/02/elf-hook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/02/elf-hook/" class="post-title-link" itemprop="url">Redirecting Functions in Shared ELF Libraries</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-02 11:18:51" itemprop="dateCreated datePublished" datetime="2019-09-02T11:18:51+08:00">2019-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:38" itemprop="dateModified" datetime="2021-06-17T10:39:38+08:00">2021-06-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/09/02/elf-hook/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/09/02/elf-hook/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>This article includes brief description of ELF structure and principles of its usage.It is used to provide the solution for intercepting function calls from one library into another one.</p>
<h1 id="The-problem"><a href="#The-problem" class="headerlink" title="The problem"></a>The problem</h1><p>We all use Dynamic Link Libraries(DLL).They provide excellent possibilities.First,such library loads into the physical address space only once for all processes.Secondly,you can expand the functionality of the program by loading the additional library,which will provide this functionality.And that is without restarting the program.Also a problem of updating is solved.It is possible to define the standard interface for the DLL and to influence the functionality and the quality of the basic program by changing the version of the library. Such methods of the code reusability were called “plug-in architecture”. But let’s move on.</p>
<p>Of course,not every dynamic link library relies only on itself and the memory.Libraries use libraries or just standard libraries. For example, programs in the C\C++</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/08/31/theGIbook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/31/theGIbook/" class="post-title-link" itemprop="url">全局光照技术：从离线到实时渲染</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-31 19:14:35" itemprop="dateCreated datePublished" datetime="2019-08-31T19:14:35+08:00">2019-08-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:38" itemprop="dateModified" datetime="2021-06-17T10:39:38+08:00">2021-06-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/theGIbook/" itemprop="url" rel="index"><span itemprop="name">theGIbook</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/08/31/theGIbook/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/08/31/theGIbook/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="全局光照"><a href="#全局光照" class="headerlink" title="全局光照"></a>全局光照</h1><p>全局光照几乎代表了计算机图形学渲染相关的全部内容，它是一个渲染器力求模拟真实物理关于物体代表交互的全部自然现象的全部内容（当然目前计算机图形学研究领域主要限于几何光学，它并不包括更微观的如干涉，衍射等光学现象，参见第1章的介绍）：即光从光源触发，以无限的速度在环境中直线前进，经过与表面发生多次反射和折射，最后进入人的眼睛形成图像。<br>然后由于光照方程是一个沿全空间方向的积分，这使得渲染过程非常耗时，在现有的硬件条件几乎不可能按照原始的光照方程进行图形渲染。不过研究发现，我们并不需要完全按照原始的光照方程进行计算，即可以生成令人信服的图像，在这个级别我们通常称为Realistic Rendering。于是人们寻求简化的光照模型以求能达到这种渲染平直，在原始光照方程的基础之上，人们提出两种简化模型：</p>
<ul>
<li>基于有限元分解的辐射度理论 有限元分解是一种常见的积分计算方法，它将一个沿无限空间的积分分解为一个有限唯独（称为一个有限元）的积分，在每个纬度，我们只需要求出有限元的均值，并可以很容易地计算出光照积分方程。在每个纬度，我们只需要求出该有限元的均值，并可以很容易地计算出光照积分方程。在辐射度理论中，通常我们通过Monte Carlo等方法预计算出每个有限元的均值，均渲染时光照方程的实时计算。</li>
<li>基于Monte Carlo方法的光线追踪技术 Monte Carlo方法通过随机抽样，使用有限个采样点的值，来计算积分方程的值。</li>
</ul>
<p>这两种方法均能达到非常高的图像品质，然后它们的计算仍然十分耗时，因此主要用于电影等离线渲染领域（例如皮克斯的渲染产品RenderMan就是基于光线追踪的渲染器）。在游戏等实时渲染领域，人们寻求更简化的渲染模型，与辐射度和光线追踪技术通过简化积分方程的思路不同，实时渲染领域的主意思路是根据光学现象或者其它理论拆分光照方程，使得光照效果最终由多种效果叠加而成，例如Direct lighting（光从光源出发经过物体表面反射或者折射一次后进入如烟），（Soft）shadow，Diffuse lighting，Specular lighting，Indirect lighting，Ambient Occlusion，Subsurface Scattering，Environment lighting，Reflection等等。<br>这些效果可能分别使用不通的方法来计算，例如Shadow可以使用GPU的光栅化特性来计算，Ambient Occlusion可以使用Post processing基于屏幕空间（Screen Space）进行计算，Environment lighting则可以使用简单的贴图实现；另一些算法则使用一些特定的数据格式来加速其中的一些计算，例如Unreal Engine 4通过对整个场景构建一个Distance field的数据结构，通过它来加速遮挡关系的计算从而实现Soft shadow以及Ambient occlusion等效果，其它一些方法则通过使用Spherical Harmonic来存储一些点的近似的“环境函数”，从而能够快速地计算各个间接反射的效果。</p>
<h1 id="光与表面的交互"><a href="#光与表面的交互" class="headerlink" title="光与表面的交互"></a>光与表面的交互</h1><p>计算机图形学（computer graphics）<br>然而，要达到逼真的视觉效果，尤其在实时的环境下，这个渲染的过程异常复杂。从技术上讲，这里有两个突出的困难需要解决：首先，对于表面上的每个点，我们必须在该点法线方向对应的半空间（hemisphere）上做积分运算以便求出该点的颜色值，因为每个点都可能接受来自场景中所有其他点反射的光照；其次，对于空间中传播的每一条光线（）</p>
<h2 id="辐射度量学"><a href="#辐射度量学" class="headerlink" title="辐射度量学"></a>辐射度量学</h2><p>光学中关于光的测量这一分支，称为辐射度量学（radiometry）。[Kajiya,1986]首次将辐射度量学引入到计算机图形学忠，用于测量和计算计算机图形学中光的传播，并由此推导出渲染方程（the rendering equation）。渲染方程保留了辐射度量学两个最基本的特性即赫姆霍兹互反律（helmholtz reciprocity）和能量守恒（energy conservation），现代图形学理论基于渲染方程提出了大量的模型用于简化和加速渲染方程的计算，在这两个基本物理特征的保障下，这些模型能够达到非常真实的图形品质。</p>
<p>辐射度量学定义了一组基本的物理量用来测量光辐射，因此这些度量也称为计算机图形学中最重要的基本概念，这几个度量的名称及单位如表1.1所示。</p>
<p>表1.1：辐射度量学中的基本度量，这些度量也称为渲染方程的基本度量</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>中文名称</th>
<th>英文名称</th>
<th>单位</th>
<th>符号</th>
</tr>
</thead>
<tbody>
<tr>
<td>辐射能量</td>
<td>radiant energy</td>
<td>$J$</td>
<td>$Q$</td>
</tr>
<tr>
<td>辐射通量</td>
<td>radiant flux</td>
<td>$W$</td>
<td>$\Phi$</td>
</tr>
<tr>
<td>辐射照度</td>
<td>irradiance</td>
<td>$W/m^2$</td>
<td>$E$</td>
</tr>
<tr>
<td>辐射强度</td>
<td>radiant intensity</td>
<td>$W/sr$</td>
<td>$I$</td>
</tr>
<tr>
<td>辐射亮度</td>
<td>radiant</td>
<td>$W/(m^2 \cdot sr)$</td>
<td>$L$</td>
</tr>
</tbody>
</table>
</div>
<p>再开始讨论这些度量之前，必须首先了解立体角（solid angle）的概念，如图1.10所示。<br><img src="/2019/08/31/theGIbook/1.png"><br><strong>图 1.10</strong> 立体角的概念，它表示单位球体上一块区域对应的球面部分的面积。根据立体角的定义，如果球面上任意一块区域的面积等于球半径的平方，当从球心观察时，该区域面积就是1sr。</p>
<p>在几何学中，立体角是2D角度的概念在3D空间的延伸，它表示在3D空间，从某个点观察，另外一个物体有多“大”。立体角的数学符号通常用$\Omega$表示，其单位是sr，它是球面度（steradians）的缩写。立体角也可以理解为3D空间中以某一点为起点的多个方向的集合。</p>
<p>正如在2D中，使用单位圆上一段弧线的长度来表示其对应“角度”的大小，在3D中，使用单位球体上一块区域面积的大小来表示其对应的“立体角”的大小。所以一个物体相对于某一点的立体角的大小，等于这个物体投影到以该点为球心的单位球体上的面积。</p>
<p>根据上述立体角的定义，如果球面上任意一块区域的面积等于球半径的平方，当从球心观察时，该区域面积就是1sr。</p>
<p>在球面坐标中，单位球体上任意一块区域A的面积可以简单地表示为：<br>$\Omega = \int\int_Asin\theta d\theta d\phi $</p>
<p>其中，$\theta$表示经度，$\phi$表示纬度，所以整个球面的立体角为4π，对于一个正方体的面，</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/08/28/Volume-light/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/28/Volume-light/" class="post-title-link" itemprop="url">游戏开发相关实时渲染技术之体积光</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-28 15:27:49" itemprop="dateCreated datePublished" datetime="2019-08-28T15:27:49+08:00">2019-08-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:38" itemprop="dateModified" datetime="2021-06-17T10:39:38+08:00">2021-06-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/08/28/Volume-light/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/08/28/Volume-light/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>散射是一种非常美丽的自然现象，在自然界中光传过潮湿或者含有杂质的介质时产生散射，散射的光线进入人眼，让这些介质看起来像拢住了光线一样，也就是所谓的体积光。<br>在游戏中体积光是很常用的一种光照特效，主要用来表现光线照射到遮蔽物体时，在物体透光部分泄漏出的光柱。由于视觉上给人很强的体积感，所以称之为体积光。<br>体积光特效在现今的中高端游戏中非常常见，优秀的体积光特效在烘托游戏氛围，提高画质感方面发挥了很大的作用。<br><img src="/2019/08/28/Volume-light/1.jpg"><br>图中清晨透过树林间隙射出的体积光为游戏增色不少<br>作为一种常用特效，体积光的制作方式多种多样，不通游戏对于处理性能，画面要求和渲染质量要求各不相同，也会使用不同的体积光表现方式。<br>早期游戏中由于机能限制经常使用的是BillBoard贴片和径向模糊这两种方式。<br>在这里简单介绍一下两种方式，重头戏还是后面最新的基于光线追踪的方式。</p>
<h1 id="BillBoard贴片"><a href="#BillBoard贴片" class="headerlink" title="BillBoard贴片"></a>BillBoard贴片</h1><p>BillBoard贴片和容易理解，用PHOTOSHOP生成一个随机的明暗条纹，加上遮罩，让它看起来有光条的感觉。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/08/28/Interpolation-for-Polygon-Texture-Mapping-and-Shading/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/28/Interpolation-for-Polygon-Texture-Mapping-and-Shading/" class="post-title-link" itemprop="url">插值多边形纹理映射和阴影</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-28 13:24:52" itemprop="dateCreated datePublished" datetime="2019-08-28T13:24:52+08:00">2019-08-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:37" itemprop="dateModified" datetime="2021-06-17T10:39:37+08:00">2021-06-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/08/28/Interpolation-for-Polygon-Texture-Mapping-and-Shading/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/08/28/Interpolation-for-Polygon-Texture-Mapping-and-Shading/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>提出了一种简单、快速的多边形纹理坐标和阴影参数插值方法。该方法可应用于z-buffer等扫描转换算法和painter算法中，对纹理坐标、颜色、法向量等阴影参数进行屏幕空间插值。以前的一些方法在屏幕空间中执行线性插值，但这是一种可旋转的变体，在纹理映射的情况下，会导致不可靠的“橡胶片”效果。为了正确地计算屏幕空间和参数空间之间的非线性投影变换，我们在多边形上使用有理线性插值，在每个像素上执行多个分割。我们提供了更简单的公式来设置这些插值计算，将每个多边形的设置成本降低到零，并将每个顶点的成本降低到几个除法。</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>我们首先定义了我们的术语，然后总结了一种简单的线性方法，用于在扫描转换期间插值着色参数。通过对线性插值的缺陷进行分析，描述了该方法，并证明了其正确性。</p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>我们定义了以下坐标系:对象空间是三维坐标系，其中定义了每个多边形。可以有多个对象空间。世界空间是一个坐标系统，通过三维建模转换(平移、旋转和缩放)与每个对象空间相关。三维屏幕空间是显示器的三维坐标系统，是一个像素坐标(x,y)和深度z的“透视空间”。相机参数与世界空间有关。最后，二维屏幕空间(简称“屏幕空间”)是没有z的三维屏幕空间的二维子空间。<br>为了方便仿射和射影(透视)变换，我们使用齐次符号[Maxwell46]，例如，二维实点(x,y)由三维齐次向量p = (xw,yw,w)表示，其中w是一个任意的非零数。我们将漫不经心地处理w = 0的情况。在齐次表示法中，二维点用3向量表示，三维点用4向量表示。<br>我们使用下面符号：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>COORDINATE SYSTEM</th>
<th>REAL</th>
<th>HOMOGENEOUS</th>
</tr>
</thead>
<tbody>
<tr>
<td>3-D object space</td>
<td>$(x_0,y_0,z_0)$</td>
<td>$P_0=(x_0w_0,y_0w_0,z_0w_0,w_0)$</td>
</tr>
<tr>
<td>3-D screen space</td>
<td>$(x,y,z)$</td>
<td>$P_\delta=(xw,yw,zw,w)$</td>
</tr>
<tr>
<td>2-D screen space</td>
<td>$(x,y)$</td>
<td>$P_s=(xw,yw,w)$</td>
</tr>
</tbody>
</table>
</div>
<h2 id="投影和仿射映射"><a href="#投影和仿射映射" class="headerlink" title="投影和仿射映射"></a>投影和仿射映射</h2><p>We will use two classes of mapping (transformation): affine and projective.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zentia.github.io/2019/08/28/Graphics-rendering-pipeline/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liyanfeng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liyanfeng">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/28/Graphics-rendering-pipeline/" class="post-title-link" itemprop="url">Graphics rendering pipeline</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-28 10:00:36" itemprop="dateCreated datePublished" datetime="2019-08-28T10:00:36+08:00">2019-08-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-17 10:39:37" itemprop="dateModified" datetime="2021-06-17T10:39:37+08:00">2021-06-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Graphics/" itemprop="url" rel="index"><span itemprop="name">Graphics</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/08/28/Graphics-rendering-pipeline/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/08/28/Graphics-rendering-pipeline/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <img src="/2019/08/28/Graphics-rendering-pipeline/1.bmp">
<p>图形渲染管线是实时渲染的核心组件。</p>
<h1 id="三角形遍历-Triangle-Traversal"><a href="#三角形遍历-Triangle-Traversal" class="headerlink" title="三角形遍历(Triangle Traversal)"></a>三角形遍历(Triangle Traversal)</h1><p>其实三角形遍历的操作我们在前面基本都说过了，通过屏幕空间的坐标组装三角形后，我们遍历这些三角形图元覆盖了哪些片段的采样点，随后得到该图元所对应的片元。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/">34</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">liyanfeng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">334</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liyanfeng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script src="/js/algolia-search.js"></script>













    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'DTWMWSlnxcXcuUgR1H2qlVt9-gzGzoHsz',
      appKey     : 'Ms2yHVyCinQmWnsKtVv7NOHR',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
